<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dashboard</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0; height: 100vh; font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: #1e1e2f; color: #eee;
    display: flex;
    flex-direction: column;
  }

  header {
    padding: 1rem 2rem;
    background: #282942;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  #user-name {
    font-weight: 700;
    font-size: 1.3rem;
    user-select: none;
  }

  #logout-btn {
    background: #ff4757;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    color: white;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    right: 0;
    transition: background 0.3s ease;
  }
  #logout-btn:hover {
    background: #e84118;
  }

  main {
    flex: 1;
    display: flex;
    gap: 1rem;
    padding: 1rem 2rem;
    overflow: hidden;
  }

  /* Liste amis à gauche */
  #friends-container {
    width: 260px;
    background: #282942;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  #friends-title {
    padding: 1rem;
    font-weight: 700;
    font-size: 1.2rem;
    text-align: center;
    border-bottom: 1px solid #444666;
    user-select: none;
  }
  #friends-list {
    flex: 1;
    overflow-y: auto;
    padding: 0.5rem 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }
  /* Scrollbar custom */
  #friends-list::-webkit-scrollbar {
    width: 8px;
  }
  #friends-list::-webkit-scrollbar-thumb {
    background: #565680;
    border-radius: 4px;
  }
  #friends-list::-webkit-scrollbar-track {
    background: #1e1e2f;
  }

  .friend-item {
    background: #3a3a5e;
    padding: 0.6rem 1rem;
    border-radius: 6px;
    color: #ccc;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    user-select: none;
    transition: background 0.2s ease;
    cursor: pointer;
  }
  .friend-item:hover {
    background: #52528f;
    color: white;
  }

  .friend-icon {
    width: 28px;
    height: 28px;
    background: #6668aa;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: 1.1rem;
    color: #ddd;
    user-select: none;
  }

  /* Message si pas d’amis */
  #no-friends {
    margin-top: auto;
    margin-bottom: auto;
    text-align: center;
    color: #999;
    font-style: italic;
    user-select: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.6rem;
  }
  #no-friends svg {
    width: 64px;
    height: 64px;
    fill: #6668aa;
  }

  /* Section centrale */
  #content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
  section {
    background: #282942;
    padding: 1rem 1.5rem;
    border-radius: 8px;
    flex-shrink: 0;
  }
  section h2 {
    margin: 0 0 0.8rem 0;
    font-weight: 700;
    text-align: center;
    font-size: 1.4rem;
    user-select: none;
    color: #c3c3f8;
  }

  /* Bouton Nouveau Projet */
  #new-project-btn {
    position: relative;
    overflow: hidden;
    background: linear-gradient(90deg, #6a5af9, #b867f9);
    color: white;
    font-weight: 700;
    border: none;
    border-radius: 12px;
    padding: 1rem 2rem;
    font-size: 1.2rem;
    cursor: pointer;
    box-shadow: 0 0 12px rgba(106, 90, 249, 0.7);
    align-self: center;
    user-select: none;
    transition: filter 0.3s ease;
  }
  #new-project-btn:hover {
    filter: brightness(1.15);
  }

  /* Effet vague (ripple effect) */
  #new-project-btn .ripple {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.7);
    animation: ripple-effect 0.6s linear;
    pointer-events: none;
    transform: scale(0);
  }
  @keyframes ripple-effect {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }

  /* Stats & Activités */
  #stats {
    display: flex;
    justify-content: space-around;
    gap: 2rem;
  }
  .stat-box {
    flex: 1;
    background: #3a3a5e;
    border-radius: 8px;
    padding: 1rem 1.2rem;
    text-align: center;
    color: #ddd;
  }
  .stat-box h3 {
    margin: 0;
    font-weight: 700;
    font-size: 1.2rem;
    color: #c3c3f8;
  }
  .stat-box p {
    margin: 0.5rem 0 0 0;
    font-size: 1.1rem;
    font-weight: 600;
  }

  /* Activité récentes (exemple) */
  #activity-list {
    max-height: 200px;
    overflow-y: auto;
    color: #ccc;
    font-size: 1rem;
  }
  #activity-list::-webkit-scrollbar {
    width: 8px;
  }
  #activity-list::-webkit-scrollbar-thumb {
    background: #565680;
    border-radius: 4px;
  }
  #activity-list::-webkit-scrollbar-track {
    background: #1e1e2f;
  }
  .activity-item {
    margin-bottom: 0.5rem;
    user-select: none;
  }

</style>
</head>
<body>

<header>
  <div id="user-name">Chargement...</div>
  <button id="logout-btn" title="Déconnexion">Déconnexion</button>
</header>

<main>
  <div id="friends-container">
    <div id="friends-title">Mes amis</div>
    <div id="friends-list">
      <!-- amis insérés ici dynamiquement -->
    </div>
    <div id="no-friends" style="display:none;">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
      <div>Aucun ami pour le moment.</div>
    </div>
  </div>

  <div id="content">
    <button id="new-project-btn">Nouveau projet</button>

    <section id="stats">
      <div class="stat-box">
        <h3>Projets totaux</h3>
        <p id="total-projects">0</p>
      </div>
      <div class="stat-box">
        <h3>Activité récente</h3>
        <div id="activity-list">
          <!-- activité ajoutée ici -->
        </div>
      </div>
    </section>
  </div>
</main>

<script>
  // Simul données (à remplacer par Firebase ou autre)
  const user = {
    displayName: null,
    email: "user@example.com",
    uid: "abc123",
    providerData: [
      { displayName: "Jean Dupont" }
    ]
  };

  const friendsData = [
    { uid: "u1", name: "Alice" },
    { uid: "u2", name: "Bob" },
    { uid: "u3", name: "Charlie" },
    // Vide possible pour test "aucun ami" []
  ];

  const projectsData = [
    { id: 1, name: "Projet Alpha" },
    { id: 2, name: "Projet Beta" }
  ];

  const activityData = [
    "Ajout du projet Alpha",
    "Modification du projet Beta",
    "Connexion effectuée"
  ];

  // -- Affichage nom utilisateur
  function displayUserName(user) {
    let display = user.displayName;
    if (!display) {
      for (const profile of user.providerData) {
        if (profile.displayName) {
          display = profile.displayName;
          break;
        }
      }
    }
    if (!display) display = user.email;
    const nameEl = document.getElementById("user-name");
    if (nameEl) nameEl.innerText = display;
  }

  // -- Gestion amis
  function loadFriends(friends) {
    const list = document.getElementById("friends-list");
    const noFriendsMsg = document.getElementById("no-friends");

    list.innerHTML = ""; // reset

    if (friends.length === 0) {
      noFriendsMsg.style.display = "flex";
      return;
    } else {
      noFriendsMsg.style.display = "none";
    }

    friends.forEach(f => {
      const item = document.createElement("div");
      item.className = "friend-item";
      // Icon avec initiale
      const icon = document.createElement("div");
      icon.className = "friend-icon";
      icon.innerText = f.name.charAt(0).toUpperCase();
      item.appendChild(icon);

      const name = document.createElement("div");
      name.innerText = f.name;
      item.appendChild(name);

      list.appendChild(item);
    });
  }

  // -- Affichage projets et stats
  function loadProjects(projects) {
    const totalProjectsEl = document.getElementById("total-projects");
    totalProjectsEl.innerText = projects.length;
  }

  // -- Activités
  function loadActivity(activity) {
    const list = document.getElementById("activity-list");
    list.innerHTML = "";
    activity.forEach(act => {
      const item = document.createElement("div");
      item.className = "activity-item";
      item.innerText = act;
      list.appendChild(item);
    });
  }

  // -- Ripple effect bouton Nouveau projet
  const newProjectBtn = document.getElementById("new-project-btn");
  newProjectBtn.addEventListener("click", (e) => {
    // Effet ripple
    const circle = document.createElement("span");
    circle.classList.add("ripple");
    const rect = newProjectBtn.getBoundingClientRect();

    circle.style.left = (e.clientX - rect.left) + "px";
    circle.style.top = (e.clientY - rect.top) + "px";
    newProjectBtn.appendChild(circle);

    setTimeout(() => {
      circle.remove();
    }, 600);

    // Action du bouton
    alert("Créer un nouveau projet (à implémenter) !");
  });

  // -- Déconnexion
  const logoutBtn = document.getElementById("logout-btn");
  logoutBtn.addEventListener("click", () => {
    // Ici ta logique de déconnexion (ex Firebase signOut)
    alert("Déconnexion en cours (à implémenter) !");
    // Exemple : firebase.auth().signOut();
  });

  // -- Initialisation page
  function init() {
    displayUserName(user);
    loadFriends(friendsData);
    loadProjects(projectsData);
    loadActivity(activityData);
  }

  init();

</script>

</body>
</html>
